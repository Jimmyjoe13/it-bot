<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-Bot - Votre assistant virtuel</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>IT-Bot - Votre assistant virtuel</h1>
            <button id="clear-button" class="clear-button">Effacer l'historique</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Message de bienvenue -->
            <div class="message-group welcome">
                <div class="avatar assistant-avatar">
                    <svg viewBox="0 0 24 24" class="bot-icon">
                        <path fill="currentColor" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                    </svg>
                </div>
                <div class="message-content">
                    <div class="message assistant">
                        <div class="message-bubble welcome-bubble">
                            <h2>Bonjour, je suis IT-Bot ðŸ‘‹</h2>
                            <p>Je suis votre assistant virtuel spÃ©cialisÃ© en informatique. Comment puis-je vous aider aujourd'hui ?</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages de la conversation -->
            {% for message in messages %}
            <div class="message-group {% if message.role == 'assistant' %}left{% else %}right{% endif %}">
                {% if message.role == 'assistant' %}
                <div class="avatar assistant-avatar">
                    <svg viewBox="0 0 24 24" class="bot-icon">
                        <path fill="currentColor" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                    </svg>
                </div>
                {% endif %}
                <div class="message-content">
                    <div class="message {% if message.role == 'assistant' %}assistant{% else %}user{% endif %}">
                        <div class="message-bubble">
                            {{ message.content | safe }}
                        </div>
                        <div class="message-info">
                            <span class="message-time">{{ message.role | title }}</span>
                            <div class="message-actions">
                                <button class="action-button" title="Copier" onclick="copyMessage(this)">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% if message.role != 'assistant' %}
                <div class="avatar user-avatar">
                    <svg viewBox="0 0 24 24" class="user-icon">
                        <path fill="currentColor" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                    </svg>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <div class="chat-input">
            <form id="chat-form">
                <input type="text" id="message-input" placeholder="Ã‰crivez votre message..." required>
                <button type="submit">Envoyer</button>
            </form>
        </div>
    </div>
    <script src="{{ url_for('static', path='/js/script.js') }}"></script>
    <script>
        // Add event listeners when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('chat-form');
            const clearButton = document.getElementById('clear-button');
            
            form.addEventListener('submit', sendMessage);
            clearButton.addEventListener('click', clearHistory);
        });
    </script>
</body>
</html>
