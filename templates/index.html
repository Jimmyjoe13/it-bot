<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-Bot - Votre assistant virtuel</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>IT-Bot - Votre assistant virtuel</h1>
            <button id="clear-button" class="clear-button">Effacer l'historique</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Message de bienvenue -->
            <div class="message-group welcome">
                <div class="avatar assistant-avatar">
                    <svg viewBox="0 0 24 24" class="bot-icon">
                        <path fill="currentColor" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                    </svg>
                </div>
                <div class="message-content">
                    <div class="message assistant">
                        <div class="message-bubble welcome-bubble">
                            <h2>Bonjour, je suis IT-Bot ðŸ‘‹</h2>
                            <p>Je suis votre assistant virtuel spÃ©cialisÃ© en informatique. Comment puis-je vous aider aujourd'hui ?</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages de la conversation -->
            {% for message in messages %}
            <div class="message-group {% if message.role == 'assistant' %}assistant{% else %}user{% endif %}">
                {% if message.role == 'assistant' %}
                <div class="avatar assistant-avatar">
                    <svg viewBox="0 0 24 24" class="bot-icon">
                        <path fill="currentColor" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                    </svg>
                </div>
                {% endif %}
                <div class="message-content">
                    <div class="message {% if message.role == 'assistant' %}assistant{% else %}user{% endif %}">
                        <div class="message-bubble {% if message.role == 'assistant' %}assistant-bubble{% else %}user-bubble{% endif %}">
                            {{ message.content }}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Formulaire de message -->
        <form id="message-form" class="chat-input">
            <input 
                type="text" 
                id="message-input" 
                placeholder="Posez votre question ici..." 
                required
                autocomplete="off"
            >
            <button type="submit">
                <svg viewBox="0 0 24 24">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
                Envoyer
            </button>
        </form>
    </div>

    <script src="{{ url_for('static', path='/js/chat.js') }}"></script>
</body>
</html>
